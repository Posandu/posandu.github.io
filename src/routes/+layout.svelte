<script lang="ts">
	import "./styles.css";
	import "svelte-ripple-action/ripple.css";
	import Footer from "./Footer.svelte";
	import Head from "./Head.svelte";
	import { fly, scale } from "svelte/transition";
	import { onMount } from "svelte";

	export let data;

	let last: { x: number; y: number };

	const snowflakeSvgs = [
		`
<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 298 298" xml:space="preserve">
<g>
	<path d="M289.5,140.5h-24.606l11.031-11.03c2.93-2.929,2.93-7.678,0.001-10.606c-2.929-2.929-7.678-2.93-10.606-0.001
		L243.681,140.5h-36.369l16.182-17.392c2.821-3.032,2.65-7.777-0.383-10.6c-1.243-1.156-2.775-1.802-4.345-1.961
		c-0.952-0.047-21.495-0.003-21.495-0.003L221.315,86.5H251.5c4.143,0,7.5-3.357,7.5-7.5s-3.357-7.5-7.5-7.5h-15.186l17.69-17.69
		c2.929-2.93,2.929-7.678,0-10.608c-2.93-2.928-7.844-2.928-10.774,0L225.167,61.1V45.5c0-4.143-3.357-7.5-7.5-7.5
		c-4.143,0-7.5,3.357-7.5,7.5v30.601l-24.837,25.004l-0.415-22.645c-0.001-0.036,0.035-0.07,0.034-0.106
		c-0.035-1.824-0.704-3.641-2.07-5.059c-2.873-2.982-7.778-3.07-10.761-0.194l-15.951,15.226V53.107l21.47-21.304
		c2.929-2.93,3.012-7.678,0.083-10.607c-2.93-2.928-7.803-2.928-10.732,0l-10.821,10.696V7.5c0-4.143-3.357-7.5-7.5-7.5
		c-4.143,0-7.5,3.357-7.5,7.5v24.393l-10.53-10.696c-2.93-2.928-7.594-2.928-10.524,0c-2.929,2.93-3.054,7.678-0.125,10.607
		l21.179,21.304v35.421l-16.176-15.475c-3.009-2.847-7.67-2.718-10.52,0.289c-1.075,1.136-1.683,2.52-1.914,3.955
		c-0.142,0.583-0.203,1.188-0.201,1.811l-0.088,21.229l-25.1-24.944V45.5c0-4.143-3.357-7.5-7.5-7.5s-7.5,3.357-7.5,7.5v14.894
		L55.142,43.202c-2.93-2.928-7.594-2.928-10.524,0c-2.929,2.93-2.887,7.678,0.042,10.608L62.392,71.5H46.5
		c-4.143,0-7.5,3.357-7.5,7.5s3.357,7.5,7.5,7.5h30.892l24.744,24.744l-23.057,0.831c-4.021,0.146-7.524,3.435-7.563,7.418
		c-0.004,0.112-0.349,0.225-0.349,0.337c0,0.003,0,0.007,0,0.011c0,0.008,0.345,0.017,0.345,0.024
		c0.045,1.875,0.955,3.736,2.395,5.158L89.748,140.5H55.025l-21.638-21.638c-2.93-2.928-7.678-2.928-10.607,0
		c-2.929,2.93-2.929,7.678,0,10.607l11.03,11.03H8.5c-4.143,0-7.5,3.357-7.5,7.5s3.357,7.5,7.5,7.5h25.02L22.78,166.239
		c-2.929,2.93-2.929,7.678,0,10.607c1.465,1.464,3.385,2.196,5.304,2.196c1.919,0,3.839-0.732,5.304-2.196L54.734,155.5h35.027
		l-15.253,16.394c-2.821,3.032-2.65,7.777,0.383,10.6c1.444,1.344,3.277,2.009,5.106,2.009c0.034,0,0.068-0.005,0.103-0.005
		c0.022,0,0.044,0.003,0.065,0.003c0.018,0,0.037,0,0.055,0l22.005-0.125L77.101,209.5H46.5c-4.143,0-7.5,3.357-7.5,7.5
		s3.357,7.5,7.5,7.5h15.601l-17.399,17.399c-2.929,2.93-2.929,7.678,0,10.607c1.465,1.464,3.385,2.196,5.304,2.196
		c1.919,0,3.672-0.732,5.137-2.196l17.025-17.191V250.5c0,4.143,3.357,7.5,7.5,7.5s7.5-3.357,7.5-7.5v-30.185l25.445-25.278
		l0.977,24.39c0.148,4.046,3.517,7.306,7.532,7.225c1.364-0.027,2.844-0.465,4.312-1.543c1.063-0.781,15.734-15.812,15.734-15.812
		v35.385l-20.971,21.137c-2.93,2.929-2.846,7.678,0.082,10.607c1.465,1.465,3.425,2.197,5.345,2.197
		c1.919,0,3.693-0.732,5.157-2.196l10.387-10.532V290.5c0,4.143,3.357,7.5,7.5,7.5c4.143,0,7.5-3.357,7.5-7.5v-25.31l11.404,11.237
		c1.465,1.464,3.468,2.196,5.387,2.196c1.919,0,3.881-0.732,5.345-2.196c2.929-2.93,2.783-7.678-0.146-10.607l-21.99-21.845v-35.7
		c0,0,13.729,12.896,15.896,14.976c2.167,2.08,3.942,3.25,6.525,3.25c0.015,0,0.03,0,0.046,0c4.142,0,7.48-3.604,7.455-7.746
		l-0.306-23.696l24.384,24.551V250.5c0,4.143,3.357,7.5,7.5,7.5c4.143,0,7.5-3.357,7.5-7.5v-15.891l18.064,17.897
		c1.465,1.464,3.467,2.196,5.387,2.196c1.919,0,3.88-0.732,5.345-2.196c2.929-2.93,2.95-7.678,0.021-10.607L236.605,224.5H251.5
		c4.143,0,7.5-3.357,7.5-7.5s-3.357-7.5-7.5-7.5h-29.894l-25.742-25.742l23.059-0.831c0.082-0.003,0.162-0.016,0.243-0.021
		c0.03-0.002,0.06-0.005,0.09-0.008c3.977-0.319,7.037-3.709,6.892-7.736c-0.087-2.424-1.32-4.531-3.155-5.837L209.138,155.5h34.835
		l21.345,21.346c1.465,1.465,3.384,2.197,5.304,2.197c1.919,0,3.839-0.732,5.303-2.196c2.93-2.929,2.93-7.678,0.001-10.606
		l-10.74-10.74H289.5c4.143,0,7.5-3.357,7.5-7.5S293.643,140.5,289.5,140.5z M200.795,125.483L186.823,140.5h-19.507l15.002-15.002
		L200.795,125.483z M170.21,95.784l0.356,20.002l-14.399,14.315V109.16L170.21,95.784z M127.263,95.865l13.904,13.323v20.205
		l-13.925-14.008L127.263,95.865z M96.862,126.444l19.762-0.712l14.768,14.768h-20.299L96.862,126.444z M97.246,169.477
		L110.25,155.5h20.851l-13.841,13.841L97.246,169.477z M127.863,201.599l-0.854-21.042l14.158-14.241v21.604L127.863,201.599z
		 M170.819,201.264l-14.652-13.478v-22.179l14.442,14.359L170.819,201.264z M200.991,168.564l-19.614,0.706l-13.77-13.77h20.292
		L200.991,168.564z"/>
</g>
</svg>`,
		`
<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 297.117 297.117" xml:space="preserve">
<path d="M294.853,140.217c-3-5.195-8.594-8.423-14.598-8.423c-2.945,0-5.855,0.781-8.416,2.259c-3.118,1.802-5.432,4.461-6.84,7.505
	h-15.929l-39.061-19.499l13.715-7.918l8.84,7.063c1.383,1.104,3.035,1.641,4.677,1.641c2.201,0,4.383-0.965,5.864-2.818
	c2.586-3.236,2.059-7.955-1.178-10.541l-4.254-3.398l10.855-6.268l6.693,1.793c0.645,0.172,1.296,0.256,1.94,0.256
	c2.512,0,4.913-1.267,6.315-3.455l8.423-13.146c1.512-2.36,1.582-5.367,0.18-7.796c-1.401-2.428-4.047-3.867-6.841-3.742
	l-15.598,0.72c-3.263,0.15-6.053,2.396-6.898,5.551l-1.852,6.91l-10.484,6.053l-0.548-4.254c-0.528-4.107-4.288-7.012-8.396-6.48
	c-4.108,0.529-7.01,4.288-6.48,8.396l1.348,10.465l-13.897,8.023l2.656-42.832l8.778-15.647c0.339,0.021,0.679,0.034,1.02,0.034
	c2.943,0,5.852-0.779,8.417-2.258c8.039-4.646,10.805-14.968,6.163-23.014c-3.001-5.194-8.595-8.421-14.597-8.421
	c-2.945,0-5.854,0.78-8.413,2.258c-8.045,4.646-10.811,14.968-6.168,23.009c0.181,0.313,0.372,0.619,0.571,0.917l-8.97,15.692
	l-35.333,23.251V66.626l10.424-4.016c3.857-1.511,5.844-5.861,4.334-9.718c-1.511-3.857-5.987-5.761-9.843-4.251l-4.916,1.876V37.81
	l4.784-4.616c2.31-2.309,2.943-5.848,1.443-8.749l-7.131-13.87c-1.288-2.49-3.837-4.055-6.641-4.055
	c-2.804,0-5.363,1.563-6.651,4.054l-7.169,13.868c-1.501,2.901-1.116,6.439,1.194,8.749l5.172,5.338v11.944l-4.069-1.769
	c-3.821-1.596-8.132,0.207-9.727,4.031c-1.596,3.822,0.084,8.215,3.906,9.811l9.89,4.182v15.988l-36.183-24.103l-9.683-15.101
	c1.546-2.545,2.495-5.52,2.495-8.709c0-9.289-7.536-16.846-16.824-16.846s-16.834,7.557-16.834,16.846S72.09,51.65,81.378,51.65
	c0.585,0,1.165-0.03,1.734-0.089l9.676,14.957l2.569,42.344L82,101.15l1.696-11.186c0.621-4.096-2.195-7.919-6.29-8.54
	c-4.092-0.621-7.919,2.194-8.54,6.29l-0.816,5.382l-10.857-6.269l-1.792-6.689c-0.845-3.154-3.635-5.399-6.897-5.551l-15.597-0.723
	c-2.792-0.119-5.439,1.314-6.842,3.741c-1.401,2.428-1.333,5.434,0.18,7.796l8.421,13.148c1.401,2.189,3.803,3.456,6.315,3.456
	c0.645,0,1.296-0.084,1.94-0.256l6.912-1.851l10.484,6.053l-3.41,2.602c-3.294,2.513-3.927,7.219-1.414,10.512
	c1.477,1.936,3.709,2.951,5.969,2.951c1.586,0,3.185-0.501,4.543-1.537l8.39-6.4l13.54,7.817l-39.514,19.661H32.116
	c-1.407-3.045-3.722-5.704-6.841-7.505c-2.559-1.477-5.468-2.259-8.414-2.259c-6.004,0-11.598,3.229-14.597,8.423
	c-2.25,3.897-2.848,8.438-1.683,12.784c1.165,4.346,3.952,7.979,7.847,10.227c2.56,1.479,5.47,2.26,8.417,2.26
	c6.003,0,11.596-3.228,14.597-8.425c0.096-0.165,0.169-0.337,0.259-0.505h18.982l37.311,18.626l-13.494,7.791l-8.842-7.063
	c-3.236-2.585-7.956-2.058-10.541,1.18c-2.585,3.236-2.057,7.956,1.18,10.541l4.253,3.396l-10.855,6.268l-6.692-1.792
	c-3.153-0.841-6.492,0.449-8.254,3.198l-8.424,13.145c-1.513,2.36-1.583,5.367-0.182,7.796c1.344,2.328,3.824,3.751,6.495,3.751
	c0.114,0,0.23-0.003,0.346-0.008l15.597-0.718c3.263-0.15,6.054-2.395,6.899-5.55l1.853-6.912l10.483-6.054l0.548,4.254
	c0.487,3.783,3.713,6.543,7.429,6.543c0.319,0,0.643-0.021,0.968-0.063c4.107-0.528,7.01-4.288,6.48-8.396l-1.348-10.465
	l13.406-7.74l-2.648,42.723l-8.425,16.453c-0.122-0.003-0.244-0.013-0.367-0.013c-2.944,0-5.853,0.78-8.415,2.259
	c-8.042,4.645-10.808,14.967-6.164,23.013c3,5.195,8.594,8.422,14.597,8.422c2.945,0,5.854-0.78,8.413-2.258
	c3.897-2.25,6.685-5.883,7.85-10.229c1.165-4.348,0.566-8.888-1.683-12.78c-0.29-0.502-0.61-0.98-0.947-1.445l8.16-16.26
	l35.888-23.839v15.94l-10.649,4.233c-3.857,1.51-5.678,5.861-4.168,9.718c1.159,2.96,4.031,4.769,7.028,4.769
	c0.909,0,1.688-0.167,2.586-0.518l5.203-2.094v12.367l-5.009,5.177c-2.31,2.31-2.775,5.848-1.275,8.748l7.215,13.868
	c1.288,2.49,3.878,4.055,6.682,4.055h0.011c2.804,0,5.378-1.564,6.666-4.054l7.178-13.868c1.501-2.9,0.787-6.439-1.523-8.749
	l-4.945-4.781v-12.267l3.844,1.535c3.818,1.594,8.298-0.209,9.894-4.031c1.596-3.822-0.334-8.215-4.156-9.811l-9.582-3.949v-15.537
	l35.535,23.452l11.715,17.38c-1.495,2.529-2.329,5.466-2.33,8.599c0.004,9.284,7.601,17.044,16.885,17.044c0.002,0,0.004,0,0.006,0
	c9.286,0,16.842-7.71,16.842-16.995c0-9.289-7.556-16.996-16.847-16.996c-0.653,0-1.296,0.047-1.931,0.121l-11.475-17.145
	l-2.582-42.572l13.848,7.995l-1.696,11.189c-0.621,4.095,2.195,7.918,6.291,8.539c0.381,0.058,0.759,0.086,1.134,0.086
	c3.645,0,6.843-2.662,7.405-6.377l0.816-5.383l10.856,6.269l1.793,6.69c0.845,3.154,3.635,5.399,6.898,5.551l15.596,0.723
	c0.116,0.005,0.232,0.008,0.348,0.008c2.67,0,5.15-1.422,6.493-3.749c1.402-2.428,1.334-5.434-0.178-7.795l-8.42-13.149
	c-1.762-2.751-5.104-4.045-8.257-3.2l-6.911,1.852l-10.483-6.053l3.408-2.6c3.294-2.512,3.928-7.218,1.416-10.512
	c-2.512-3.293-7.216-3.928-10.512-1.416l-8.391,6.399l-13.761-7.945l37.249-18.533h18.098c0.09,0.168,0.163,0.34,0.259,0.505
	c2.999,5.196,8.592,8.425,14.596,8.425h0.001c2.946,0,5.856-0.781,8.413-2.259c3.898-2.249,6.685-5.881,7.85-10.227
	C297.7,148.656,297.103,144.116,294.853,140.217z M189.127,78.661l-2.529,39.452l-30.039,17.295v-35.324L189.127,78.661z
	 M108.384,78.607l33.174,22.107v35.014l-30.877-17.875L108.384,78.607z M68.133,148.505l35.389-17.608l30.591,17.662l-30.546,17.635
	L68.133,148.505z M108.292,218.456l2.344-39.167l30.922-17.901v34.963L108.292,218.456z M189.034,218.509l-32.476-21.424V161.71
	l29.995,17.27L189.034,218.509z M194.483,166.093l-30.37-17.535l30.325-17.508l35.179,17.561L194.483,166.093z"/>
</svg>`,
	];
</script>

<svelte:window
	on:mousemove={(e) => {
		/**
		if (
			!last ||
			Math.abs(last.x - e.clientX) > 100 ||
			Math.abs(last.y - e.clientY) > 100
		) {
			const el = document.createElement("div");
			el.innerHTML =
				snowflakeSvgs[Math.floor(Math.random() * snowflakeSvgs.length)];
			el.classList.add("snowflake");
			el.style.top = `${e.clientY - 10}px`;
			el.style.left = `${e.clientX - 10}px`;
			el.style.zIndex = `8999`;
			
			document.body.appendChild(el);

			last = { x: e.clientX, y: e.clientY };

			el.addEventListener("animationend", () => {
				document.body.removeChild(el);
			});
		}
		**/
	}}
/>

<main>
	<Head />

	<div class="max-w-4xl mx-auto md:px-8 px-4 overflow-x-hidden">
		{#key data.url}
			<div
				in:scale={{ delay: 300, duration: 200, start: 0.992, opacity: 0 }}
				out:scale={{ duration: 200, start: 1.02, opacity: 0 }}
				class="overflow-hidden relative z-10"
			>
				<slot />
			</div>
		{/key}

		<div
			class="max-w-[100vw] min-h-screen blur-3xl isolate w-full pointer-events-none absolute top-0 left-0 overflow-hidden"
		>
			<div
				class="w-64 h-64 rounded-full bg-gradient-to-tr opacity-30 from-purple-900 to-blue-900 scale-150 absolute pointer-events-none top-20 left-48"
			></div>
			<div
				class="w-64 h-64 rounded-full bg-gradient-to-tr opacity-40 from-purple-900 to-blue-900 scale-150 absolute pointer-events-none bottom-20 right-48"
			></div>
		</div>

		<Footer />
	</div>
</main>

<style>
	:global(.snowflake) {
		animation: snowflake 1s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
		@apply fixed z-50;
	}

	:global(.snowflake svg) {
		width: 20px;
		height: 20px;
		fill: white;
	}

	@keyframes snowflake {
		0% {
			transform: translateY(-100px);
		}
		50% {
			opacity: 1;
		}
		100% {
			transform: translateY(100px);
			opacity: 0;
		}
	}
</style>
